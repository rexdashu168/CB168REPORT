<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rexå¤§å”çš„æŠ•è³‡ç ”å ±åŠ©æ‰‹</title>
    <style>
        :root {
            --primary: #6366f1;
            --gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --bg: #f5f5f7;
            --text: #1f2937;
            --text-light: #6b7280;
            --card: #ffffff;
            --shadow: 0 2px 8px rgba(0,0,0,0.06);
            --danger: #dc2626;
            --danger-bg: #fee2e2;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding-bottom: 80px; /* é ç•™åº•éƒ¨å°èˆªç©ºé–“ */
            -webkit-tap-highlight-color: transparent;
        }

        /* è¦–åœ–æ§åˆ¶ */
        .view {
            display: none;
            animation: fade 0.25s ease;
            min-height: 100vh;
        }
        .view.active { display: block; }
        
        @keyframes fade {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å…±ç”¨å…ƒä»¶ */
        .header {
            background: var(--gradient);
            color: #fff;
            padding: 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            height: 50px;
            box-sizing: border-box;
        }

        .header h1 {
            margin: 0;
            font-size: 18px;
            flex-grow: 1;
            text-align: center;
            font-weight: 600;
        }

        .btn-icon {
            background: none;
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            padding: 0 10px;
            width: 40px;
        }

        /* æœå°‹èˆ‡ç¯©é¸ */
        .search-box {
            background: var(--card);
            padding: 12px;
            margin: 12px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #eee;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
            outline: none;
            transition: 0.3s;
            background: #f9fafb;
        }

        .input-field:focus {
            border-color: var(--primary);
            background: #fff;
        }

        .chips {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 0 12px 12px 12px;
            scrollbar-width: none;
        }
        .chips::-webkit-scrollbar { display: none; }

        .chip {
            padding: 6px 16px;
            background: #e5e7eb;
            border-radius: 20px;
            font-size: 13px;
            white-space: nowrap;
            cursor: pointer;
            transition: 0.2s;
            color: var(--text-light);
        }
        .chip.active {
            background: var(--primary);
            color: #fff;
            font-weight: 500;
        }

        /* ç¶²æ ¼é¸å–® */
        .section-title {
            padding: 0 16px;
            margin: 16px 0 8px;
            font-size: 14px;
            color: var(--text-light);
            font-weight: 600;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 0 12px 12px;
        }

        .card-btn {
            background: var(--card);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid rgba(0,0,0,0.02);
        }
        .card-btn:active { transform: scale(0.98); }

        .card-icon {
            font-size: 28px;
            margin-bottom: 8px;
            display: block;
        }
        
        .card-text {
            font-size: 14px;
            font-weight: 500;
        }

        /* åˆ—è¡¨æ¨£å¼ */
        .list { padding: 0 12px; }

        .item {
            background: var(--card);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.1s;
            border-left: 4px solid transparent;
        }
        
        .item:active { transform: scale(0.99); }
        
        .item.high-imp {
            border-left-color: var(--danger);
        }

        .item-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .company-name { font-weight: 700; font-size: 16px; }
        .report-date { font-size: 12px; color: #9ca3af; }

        .item-sub {
            font-size: 13px;
            color: var(--text-light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .broker-badge {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
        }

        .item-desc {
            font-size: 14px;
            line-height: 1.5;
            color: #374151;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .tags { display: flex; flex-wrap: wrap; gap: 6px; }
        
        .tag {
            display: inline-block;
            background: #ede9fe;
            color: var(--primary);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 500;
        }
        .tag.high {
            background: var(--danger-bg);
            color: var(--danger);
        }

        /* è©³ç´°é æ¨£å¼ */
        .detail-body {
            padding: 16px;
            background: #fff;
            min-height: calc(100vh - 50px);
        }
        
        .detail-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .detail-title { font-size: 24px; font-weight: 700; margin-bottom: 8px; }
        .detail-meta { color: var(--text-light); font-size: 13px; }

        .detail-sec { margin-bottom: 24px; }
        .detail-sec h3 {
            border-left: 4px solid var(--primary);
            padding-left: 10px;
            margin-bottom: 12px;
            font-size: 16px;
            color: var(--text);
        }
        .detail-content {
            font-size: 15px;
            line-height: 1.6;
            color: #4b5563;
            white-space: pre-line; /* ä¿ç•™æ›è¡Œ */
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
        }

        /* åº•éƒ¨å°èˆª */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #fff;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 99;
            padding-bottom: max(10px, env(safe-area-inset-bottom));
        }

        .nav-item {
            text-align: center;
            color: #9ca3af;
            font-size: 10px;
            cursor: pointer;
            flex: 1;
        }
        
        .nav-item.active { color: var(--primary); }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
            display: block;
        }

    </style>
</head>
<body>

    <div id="home" class="view active">
        <div class="header">
            <h1>æŠ•è³‡ç ”å ±åŠ©æ‰‹</h1>
        </div>
        
        <div class="search-box">
            <input type="text" class="input-field" placeholder="è¼¸å…¥å…¬å¸åç¨±ã€ä»£è™Ÿæˆ–é—œéµå­—..." onkeyup="if(event.key==='Enter') app.search(this.value)">
        </div>

        <div class="section-title">å¿«é€Ÿç¯©é¸</div>
        <div class="grid">
            <div class="card-btn" onclick="app.filter('high')">
                <span class="card-icon">ğŸ”¥</span>
                <span class="card-text">é«˜é‡è¦æ€§</span>
            </div>
            <div class="card-btn" onclick="app.filter('semicon')">
                <span class="card-icon">ğŸ’»</span>
                <span class="card-text">åŠå°é«”</span>
            </div>
            <div class="card-btn" onclick="app.filter('ai')">
                <span class="card-icon">ğŸ¤–</span>
                <span class="card-text">AI å°ˆå€</span>
            </div>
            <div class="card-btn" onclick="app.filter('all')">
                <span class="card-icon">ğŸ“‚</span>
                <span class="card-text">æ‰€æœ‰å ±å‘Š</span>
            </div>
        </div>

        <div class="section-title">æœ€æ–°å ±å‘Š</div>
        <div id="home-list" class="list">
            </div>
    </div>

    <div id="list" class="view">
        <div class="header">
            <button class="btn-icon" onclick="app.go('home')">â®</button>
            <h1 id="list-title">æœå°‹çµæœ</h1>
            <div style="width: 40px;"></div> </div>
        
        <div class="chips">
            <div class="chip active" onclick="app.filter('all', this)">å…¨éƒ¨</div>
            <div class="chip" onclick="app.filter('high', this)">é«˜é‡è¦æ€§</div>
            <div class="chip" onclick="app.filter('ai', this)">AI ä¾›æ‡‰éˆ</div>
        </div>

        <div id="full-list" class="list">
            </div>
    </div>

    <div id="detail" class="view">
        <div class="header">
            <button class="btn-icon" onclick="app.back()">â®</button>
            <h1>å ±å‘Šè©³æƒ…</h1>
            <div style="width: 40px;"></div>
        </div>
        <div id="detail-container" class="detail-body">
            </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="app.go('home')">
            <span class="nav-icon">ğŸ </span>
            é¦–é 
        </div>
        <div class="nav-item" onclick="document.querySelector('.input-field').focus()">
            <span class="nav-icon">ğŸ”</span>
            æœå°‹
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ‘¤</span>
            æˆ‘çš„
        </div>
    </nav>

    <script>
        // === è³‡æ–™åº« (Rexå¤§å”è³‡æ–™åº«æ¨¡æ“¬è³‡æ–™) ===
        const DB = [
            { 
                id: 1, 
                date: "2025/11/11", 
                company: "è¯ç¢©", 
                code: "2357", 
                broker: "å…ƒå¤§æŠ•é¡§", 
                importance: "high", 
                tags: ["AIä¼ºæœå™¨", "PC"], 
                summary: "3Q25å‰µæ–°é«˜ï¼ŒAIä¼ºæœå™¨å æ¯”20%ï¼Œå±•æœ›æ­£å‘ã€‚", 
                detail: {
                    "ç‡Ÿé‹é‡é»": "ç‡Ÿæ”¶1,899å„„å‰µæ–°é«˜(QoQ+9.1%)ã€‚\nç‡Ÿç›Šç‡4.4%æå‰é”æ¨™ã€‚\nAI PCå¸‚ä½”ç‡25%å¸‚å ´ç¬¬ä¸€ã€‚",
                    "å±•æœ›": "AIä¼ºæœå™¨æ˜å¹´æ–°å¢æ­ç¾ä¸€ç·šCSPè¨‚å–®ã€‚\nGB200å·²æ–¼9æœˆå‡ºè²¨ï¼Œé è¨ˆæ˜å¹´æ”¾é‡ã€‚"
                }
            },
            { 
                id: 2, 
                date: "2025/11/12", 
                company: "å°ç©é›»", 
                code: "2330", 
                broker: "æ‘©æ ¹å¤§é€š", 
                importance: "high", 
                tags: ["åŠå°é«”", "å…ˆé€²è£½ç¨‹"], 
                summary: "3å¥ˆç±³ç”¢èƒ½æ»¿è¼‰ï¼ŒCoWoS æ“´ç”¢é€²åº¦è¶…å‰ã€‚",
                detail: {
                    "ç‡Ÿé‹é‡é»": "å…ˆé€²è£½ç¨‹ç‡Ÿæ”¶ä½”æ¯”çªç ´60%ã€‚\né«˜æ•ˆèƒ½é‹ç®—(HPC)éœ€æ±‚å¼·å‹ï¼ŒæŠµéŠ·æ‰‹æ©Ÿæ·¡å­£å½±éŸ¿ã€‚",
                    "å±•æœ›": "ç¶­æŒå…¨å¹´ç‡Ÿæ”¶æˆé•·30%é æ¸¬ä¸è®Šï¼Œè³‡æœ¬æ”¯å‡ºç¶­æŒé«˜æª”ã€‚"
                }
            },
            { 
                id: 3, 
                date: "2025/11/10", 
                company: "å»£é”", 
                code: "2382", 
                broker: "å‡±åŸºè­‰åˆ¸", 
                importance: "high", 
                tags: ["AIä¼ºæœå™¨", "è»Šç”¨"], 
                summary: "AIä¼ºæœå™¨å‡ºè²¨æš¢æ—ºï¼Œè»Šç”¨æ¥­å‹™ç¶­æŒé›™ä½æ•¸æˆé•·ã€‚", 
                detail: {
                    "ç‡Ÿé‹é‡é»": "ç­†é›»å‡ºè²¨å„ªæ–¼é æœŸï¼ŒAIä¼ºæœå™¨ç‡Ÿæ”¶ä½”æ¯”æ‹‰å‡è‡³35%ã€‚",
                    "å±•æœ›": "GB200æ•´æ©Ÿæ«ƒé è¨ˆæ˜å¹´Q1å¤§é‡å‡ºè²¨ï¼Œè²¢ç»é¡¯è‘—ç‡Ÿæ”¶ã€‚"
                }
            },
            { 
                id: 4, 
                date: "2025/11/09", 
                company: "è¯ç™¼ç§‘", 
                code: "2454", 
                broker: "é«˜ç››", 
                importance: "normal", 
                tags: ["ICè¨­è¨ˆ", "æ‰‹æ©Ÿ"], 
                summary: "å¤©ç’£9400å¸‚å ´åæ‡‰ä½³ï¼Œæ——è‰¦æ™¶ç‰‡å¸‚ä½”æå‡ã€‚",
                detail: {
                    "ç‡Ÿé‹é‡é»": "Androidæ——è‰¦æ©Ÿéœ€æ±‚å›æº«ï¼Œå¸¶å‹•é«˜éšæ™¶ç‰‡å‡ºè²¨ã€‚\néæ‰‹æ©Ÿæ¥­å‹™(PMIC/WiFi7)è¡¨ç¾ç©©å¥ã€‚",
                    "å±•æœ›": "æŒçºŒæ·±è€•ASICæ¥­å‹™ï¼Œèˆ‡åœ‹éš›å¤§å» åˆä½œAIå°ˆæ¡ˆã€‚"
                }
            },
            { 
                id: 5, 
                date: "2025/11/08", 
                company: "ç·¯ç©", 
                code: "6669", 
                broker: "é‡æ‘", 
                importance: "normal", 
                tags: ["ä¼ºæœå™¨", "é›²ç«¯"], 
                summary: "å°ˆæ¡ˆå»¶é²å½±éŸ¿çŸ­æœŸç‡Ÿæ”¶ï¼Œé•·æœŸAIè¶¨å‹¢ä¸è®Šã€‚",
                detail: {
                    "ç‡Ÿé‹é‡é»": "ASICä¼ºæœå™¨å‡ºè²¨æ”¾ç·©ï¼Œç­‰å¾…æ–°æ™¶ç‰‡è½‰æ›æœŸã€‚",
                    "å±•æœ›": "ä¸»è¦å®¢æˆ¶ Metaè³‡æœ¬æ”¯å‡ºä¸Šä¿®ï¼Œæ˜å¹´AIä¼ºæœå™¨å°‡é‡å›é«˜æˆé•·è»Œé“ã€‚"
                }
            }
        ];

        // === æ‡‰ç”¨é‚è¼¯æ ¸å¿ƒ ===
        const app = {
            historyStack: ['home'], // ç°¡å–®çš„è·¯ç”±å †ç–Š

            init: function() {
                this.renderList(DB.slice(0, 3), 'home-list'); // é¦–é é¡¯ç¤ºå‰3ç­†
            },

            // åˆ‡æ›é é¢
            go: function(viewId) {
                document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
                document.getElementById(viewId).classList.add('active');
                
                // æ›´æ–°å †ç–Š
                if (viewId !== this.historyStack[this.historyStack.length - 1]) {
                    this.historyStack.push(viewId);
                }
                window.scrollTo(0, 0);
            },

            // è¿”å›åŠŸèƒ½
            back: function() {
                if (this.historyStack.length > 1) {
                    this.historyStack.pop(); // ç§»é™¤ç•¶å‰
                    const prev = this.historyStack[this.historyStack.length - 1];
                    
                    document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
                    document.getElementById(prev).classList.add('active');
                } else {
                    this.go('home');
                }
            },

            // æ¸²æŸ“åˆ—è¡¨å¡ç‰‡
            renderList: function(data, targetId) {
                const el = document.getElementById(targetId);
                if (!data.length) {
                    el.innerHTML = '<div style="text-align:center; padding:20px; color:#999;">ç„¡ç¬¦åˆè³‡æ–™</div>';
                    return;
                }
                
                el.innerHTML = data.map(item => `
                    <div class="item ${item.importance === 'high' ? 'high-imp' : ''}" onclick="app.showDetail(${item.id})">
                        <div class="item-head">
                            <span class="company-name">${item.company} <span style="font-weight:400; font-size:14px; color:#666;">${item.code}</span></span>
                            <span class="report-date">${item.date}</span>
                        </div>
                        <div class="item-sub">
                            <span class="broker-badge">${item.broker}</span>
                            ${item.importance === 'high' ? '<span class="tag high">ğŸ”¥ é«˜é‡è¦æ€§</span>' : ''}
                        </div>
                        <div class="item-desc">${item.summary}</div>
                        <div class="tags">
                            ${item.tags.map(t => `<span class="tag">#${t}</span>`).join('')}
                        </div>
                    </div>
                `).join('');
            },

            // é¡¯ç¤ºè©³æƒ…
            showDetail: function(id) {
                const item = DB.find(d => d.id === id);
                if (!item) return;

                const container = document.getElementById('detail-container');
                
                // æ§‹å»ºè©³ç´°å…§å®¹ HTML
                let detailHtml = `
                    <div class="detail-header">
                        <div class="detail-title">${item.company} (${item.code})</div>
                        <div class="detail-meta">
                            ${item.date} | ${item.broker} | 
                            ${item.importance === 'high' ? '<span style="color:var(--danger)">é«˜é‡è¦æ€§</span>' : 'ä¸€èˆ¬'}
                        </div>
                    </div>
                    <div class="detail-sec">
                        <h3>æ‘˜è¦</h3>
                        <div class="detail-content">${item.summary}</div>
                    </div>
                `;

                // è¿´åœˆè™•ç† detail ç‰©ä»¶å…§çš„éµå€¼å°
                for (const [key, value] of Object.entries(item.detail)) {
                    detailHtml += `
                        <div class="detail-sec">
                            <h3>${key}</h3>
                            <div class="detail-content">${value}</div>
                        </div>
                    `;
                }

                container.innerHTML = detailHtml;
                this.go('detail');
            },

            // æœå°‹åŠŸèƒ½
            search: function(key) {
                if (!key) {
                    alert("è«‹è¼¸å…¥é—œéµå­—");
                    return;
                }
                const res = DB.filter(d => 
                    (d.company + d.code + d.tags.join("") + d.summary).includes(key)
                );
                this.go('list');
                document.getElementById('list-title').innerText = `æœå°‹: "${key}"`;
                this.renderList(res, 'full-list');
                
                // é‡ç½®éæ¿¾æ¨™ç±¤
                document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            },

            // ç¯©é¸åŠŸèƒ½
            filter: function(type, btn) {
                if (btn) {
                    document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                }

                let res = DB;
                let title = "æ‰€æœ‰å ±å‘Š";

                if (type === 'high') {
                    res = DB.filter(d => d.importance === 'high');
                    title = "é«˜é‡è¦æ€§å ±å‘Š";
                } else if (type === 'semicon') {
                    res = DB.filter(d => d.tags.includes('åŠå°é«”') || d.tags.includes('ICè¨­è¨ˆ'));
                    title = "åŠå°é«”ç”¢æ¥­";
                } else if (type === 'ai') {
                    res = DB.filter(d => d.tags.some(t => t.includes('AI')));
                    title = "AI ä¾›æ‡‰éˆå°ˆå€";
                }

                document.getElementById('list-title').innerText = title;
                this.renderList(res, type === 'all' || btn ? 'full-list' : 'full-list'); // ç°¡å–®é‚è¼¯ï¼Œçµ±ä¸€æ¸²æŸ“åˆ° list view
                
                if (!btn) this.go('list'); // å¦‚æœæ˜¯å¾é¦–é æŒ‰éˆ•é»æ“Šï¼Œæ‰è·³è½‰
            }
        };

        // åˆå§‹åŒ–
        app.init();
    </script>
</body>
</html>
